# üö® –°—Ä–æ—á–Ω–æ–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –±–µ–∑ –ë—ç–∫–µ–Ω–¥–∞

## –ü—Ä–æ–±–ª–µ–º–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **"Disconnected"** –∏ –Ω–µ—Ç —Ñ–∏–≥—É—Ä.

**–ü—Ä–∏—á–∏–Ω–∞:** –ë—ç–∫–µ–Ω–¥ –Ω–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω, –∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Å–µ—Ä–≤–µ—Ä—É.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –ë—ç–∫–µ–Ω–¥

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å Backend Service –Ω–∞ Render

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://dashboard.render.com/
2. –ù–∞–∂–º–∏—Ç–µ: **New + ‚Üí Web Service**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `chess-playground-test`
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ:**

```
Name:            chess-backend
Environment:     Java
Region:          Frankfurt (–∏–ª–∏ –±–ª–∏–∂–∞–π—à–∏–π)
Branch:          main
Root Directory:  backend

Build Command:   ./gradlew clean build -x test
Start Command:   java -jar build/libs/*.jar

Instance Type:   Free
```

5. **Advanced ‚Üí Environment Variables** - –¥–æ–±–∞–≤—å—Ç–µ:

```
PORT = 8080
ALLOWED_ORIGINS = https://chess-frontend-n6jk.onrender.com
```

6. –ù–∞–∂–º–∏—Ç–µ **"Create Web Service"**

7. **–î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è** (~5-10 –º–∏–Ω—É—Ç –ø–µ—Ä–≤—ã–π —Ä–∞–∑)

---

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å URL –ë—ç–∫–µ–Ω–¥–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞:
```
https://chess-backend-abc123.onrender.com
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç URL!**

---

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å Frontend Environment Variables

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Render Dashboard (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à frontend service: https://dashboard.render.com/
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ—Ä–≤–∏—Å **chess-frontend-n6jk**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Environment**
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
VITE_API_URL = https://chess-backend-abc123.onrender.com
VITE_WS_URL = https://chess-backend-abc123.onrender.com/ws
```

5. –ù–∞–∂–º–∏—Ç–µ **"Save Changes"** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç—Å—è

#### –í–∞—Ä–∏–∞–Ω—Ç B: –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Static Site)

–ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ - Static Site, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è **–ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç** –ø—Ä–∏ –±–∏–ª–¥–µ –Ω–∞ Render.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env.production` —Ñ–∞–π–ª:

```bash
# –í –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
cd frontend

# –°–æ–∑–¥–∞—Ç—å .env.production —Å —Ä–µ–∞–ª—å–Ω—ã–º URL
echo "VITE_API_URL=https://chess-backend-abc123.onrender.com" > .env.production
echo "VITE_WS_URL=https://chess-backend-abc123.onrender.com/ws" >> .env.production

# –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å
git add .env.production
git commit -m "Update production backend URL"
git push origin main
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å –Ω–æ–≤—ã–º URL.

---

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Blueprint

–ú–æ–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å **–æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ —Å—Ä–∞–∑—É** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://dashboard.render.com/select-repo
2. –í—ã–±–µ—Ä–∏—Ç–µ `chess-playground-test`
3. Render –Ω–∞–π–¥–µ—Ç `render.yaml` –≤ –∫–æ—Ä–Ω–µ
4. –ù–∞–∂–º–∏—Ç–µ **"Apply"**
5. Render —Å–æ–∑–¥–∞—Å—Ç:
   - `chess-backend` (Web Service)
   - `chess-frontend` (Static Site)

**–ü—Ä–æ–±–ª–µ–º–∞ Blueprint:** URL —Å–µ—Ä–≤–∏—Å–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å CORS –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±—ç–∫–µ–Ω–¥–∞:

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Backend Health

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://chess-backend-abc123.onrender.com/api/health
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
```json
{"status":"ok","service":"chess-backend"}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket

–û—Ç–∫—Ä–æ–π—Ç–µ:
```
https://chess-backend-abc123.onrender.com/ws
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "Welcome to SockJS!" –∏–ª–∏ 404 (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è WebSocket).

### 3. –û—Ç–∫—Ä—ã—Ç—å Frontend

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞:
```
https://chess-frontend-n6jk.onrender.com
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- ‚úÖ **Connected** (–∑–µ–ª–µ–Ω—ã–π)
- ‚úÖ –§–∏–≥—É—Ä—ã –Ω–∞ –¥–æ—Å–∫–µ

---

## üêõ Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Render Dashboard:
```
Dashboard ‚Üí chess-backend ‚Üí Logs
```

**–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- **Java version:** –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å 17+ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `system.properties`)
- **Build failed:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `gradlew` executable permission
- **Port binding:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç `$PORT` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Disconnected"

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –±—ç–∫–µ–Ω–¥–∞** –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Network)
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `https://chess-backend-abc123.onrender.com`
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `http://localhost:8080` ‚Üí –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å environment variables

2. **CORS –æ—à–∏–±–∫–∞:**
   - Backend logs –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `ALLOWED_ORIGINS`
   - –î–æ–±–∞–≤—å—Ç–µ frontend URL –≤ `ALLOWED_ORIGINS` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

3. **WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `VITE_WS_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `https://` (–Ω–µ `wss://`)
   - SockJS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª

---

## üìä –¢–µ–∫—É—â–∏–π –°—Ç–∞—Ç—É—Å

‚úÖ **Frontend:** –ó–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ `https://chess-frontend-n6jk.onrender.com`  
‚ùå **Backend:** –ù–ï –∑–∞–¥–µ–ø–ª–æ–µ–Ω ‚Üí –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å  
‚ùå **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±—ç–∫–µ–Ω–¥—É

---

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –†–µ—à–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
git add .
git commit -m "Fix: Use environment variables for API URL"
git push origin main

# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Render Dashboard
# 3. –°–æ–∑–¥–∞–π—Ç–µ Web Service –¥–ª—è backend (—Å–ª–µ–¥—É–π—Ç–µ –®–∞–≥—É 1 –≤—ã—à–µ)
# 4. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ backend URL
# 5. –û–±–Ω–æ–≤–∏—Ç–µ .env.production –≤ –ø—Ä–æ–µ–∫—Ç–µ
# 6. –ü—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Üí Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç frontend
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç

- [ ] Backend –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Render
- [ ] Backend health check —Ä–∞–±–æ—Ç–∞–µ—Ç (`/api/health`)
- [ ] Frontend `.env.production` –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º backend URL
- [ ] Frontend –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- [ ] Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Connected"
- [ ] –§–∏–≥—É—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –¥–æ—Å–∫–µ
- [ ] –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ö–æ–¥—ã

---

üéØ **–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –∏–≥—Ä–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!**
