# ‚ö° Optimistic Updates - Instant UI Response

**–î–∞—Ç–∞:** February 10, 2026

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ö–ª–∏–∫ –Ω–∞ —Ñ–∏–≥—É—Ä—É ‚Üí –∂–¥–∞—Ç—å 200-700ms ‚Üí –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ö–æ–¥–æ–≤ ‚è±Ô∏è
- –ö–ª–∏–∫ –Ω–∞ —Ö–æ–¥ ‚Üí –∂–¥–∞—Ç—å 200-700ms ‚Üí —Ñ–∏–≥—É—Ä–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è ‚è±Ô∏è
- –û—â—É—â–µ–Ω–∏–µ "–ª–∞–≥–∞" –∏ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–ª–æ round-trip –∫ —Å–µ—Ä–≤–µ—Ä—É (—Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ).

---

## ‚ú® –†–µ—à–µ–Ω–∏–µ: Optimistic Updates

### –ß—Ç–æ –ò–∑–º–µ–Ω–∏–ª–æ—Å—å

#### 1. **Instant Move Highlighting** (–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ü–æ–¥—Å–≤–µ—Ç–∫–∞)

**–î–æ:**
```
–ö–ª–∏–∫ –Ω–∞ —Ñ–∏–≥—É—Ä—É
   ‚Üì
–ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä         ‚Üê 100-300ms
   ‚Üì
–°–µ—Ä–≤–µ—Ä –≤—ã—á–∏—Å–ª—è–µ—Ç —Ö–æ–¥—ã    ‚Üê 10-50ms
   ‚Üì
–û—Ç–≤–µ—Ç —Å —Ö–æ–¥–∞–º–∏           ‚Üê 100-300ms
   ‚Üì
–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

–ò–¢–û–ì–û: 200-650ms –∑–∞–¥–µ—Ä–∂–∫–∞ ‚ùå
```

**–ü–æ—Å–ª–µ:**
```
–ö–ª–∏–∫ –Ω–∞ —Ñ–∏–≥—É—Ä—É
   ‚Üì
–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è     ‚Üê <5ms
   ‚Üì
–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ú–ì–ù–û–í–ï–ù–ù–û ‚úÖ

(–°–µ—Ä–≤–µ—Ä –≤—Å–µ –µ—â–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ–Ω–æ–º –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

–ò–¢–û–ì–û: <5ms ‚ö°
```

#### 2. **Instant Piece Movement** (–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ)

**–î–æ:**
```
–ö–ª–∏–∫ –Ω–∞ —Ö–æ–¥
   ‚Üì
–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä       ‚Üê 100-300ms
   ‚Üì
–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ     ‚Üê 20-100ms
   ‚Üì
–û—Ç–≤–µ—Ç —Å –Ω–æ–≤—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º ‚Üê 100-300ms
   ‚Üì
–§–∏–≥—É—Ä–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è

–ò–¢–û–ì–û: 220-700ms –∑–∞–¥–µ—Ä–∂–∫–∞ ‚ùå
```

**–ü–æ—Å–ª–µ:**
```
–ö–ª–∏–∫ –Ω–∞ —Ö–æ–¥
   ‚Üì
–§–∏–≥—É—Ä–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ú–ì–ù–û–í–ï–ù–ù–û ‚úÖ

(–°–µ—Ä–≤–µ—Ä –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ–Ω–æ–º)
   ‚Üì
–ï—Å–ª–∏ –û–ö ‚Üí –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
–ï—Å–ª–∏ ERROR ‚Üí –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ò–¢–û–ì–û: <5ms ‚ö°
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Performance Metrics

| –î–µ–π—Å—Ç–≤–∏–µ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----|-------|-----------|
| **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ö–æ–¥–æ–≤** | 200-650ms | <5ms | **40-130x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã** | 220-700ms | <5ms | **44-140x –±—ã—Å—Ç—Ä–µ–µ** |
| **–ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏** | 1.0s —Ü–∏–∫–ª | 0.7s —Ü–∏–∫–ª | 30% –±—ã—Å—Ç—Ä–µ–µ |
| **–ê–Ω–∏–º–∞—Ü–∏—è —Ñ–∏–≥—É—Ä** | 0.3-0.4s | 0.2s | 33-50% –±—ã—Å—Ç—Ä–µ–µ |

### User Experience

**–î–æ:**
- üòê –ó–∞–º–µ—Ç–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–ª–∏–∫–µ
- üòê –û—â—É—â–µ–Ω–∏–µ "–ª–∞–≥–∞"
- üòê –ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ –∏–≥—Ä–∞ –æ–Ω–ª–∞–π–Ω

**–ü–æ—Å–ª–µ:**
- ‚ú® –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫
- ‚ú® –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚ú® –û—â—É—â–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –∏–≥—Ä—ã

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### 1. Client-Side Validation

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å `frontend/src/services/validation.ts`:

```typescript
import { getLegalMoves } from '../services/validation';

// –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤—ã—á–∏—Å–ª—è–µ–º –ª–µ–≥–∞–ª—å–Ω—ã–µ —Ö–æ–¥—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
const legalMoves = getLegalMoves(position, gameState);

setGameState(prev => ({
  ...prev,
  selectedCell: position,
  validMoves: legalMoves, // Instant!
}));
```

### 2. Optimistic Board Updates

```typescript
const makeMove = (from: Position, to: Position) => {
  // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–ª—è rollback)
  serverStateRef.current = gameState;
  pendingMoveRef.current = { from, to };
  
  // 2. –ü—Ä–∏–º–µ–Ω—è–µ–º —Ö–æ–¥ –°–†–ê–ó–£ (optimistic)
  const newBoard = [...gameState.board];
  newBoard[to.row][to.col] = newBoard[from.row][from.col];
  newBoard[from.row][from.col] = null;
  
  setGameState(prev => ({
    ...prev,
    board: newBoard, // Instant visual update!
  }));
  
  // 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—Ñ–æ–Ω–æ–º)
  send('/app/game/move', { gameId, from, to });
};
```

### 3. Server Confirmation & Rollback

```typescript
subscribe(`/topic/game/${gameId}`, (message) => {
  // –°–µ—Ä–≤–µ—Ä –ø—Ä–∏—Å–ª–∞–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  serverStateRef.current = message.gameState;
  pendingMoveRef.current = null;
  
  setGameState(message.gameState); // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ
  
  // –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª–æ–Ω–∏–ª ‚Üí –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—Ç–∫–∞—Ç –∫ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
});
```

### 4. Faster Animations

**CSS Improvements:**
```css
/* –ë—ã—Å—Ç—Ä–µ–µ transitions */
.chess-cell {
  transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* –ë—ã—Å—Ç—Ä–µ–µ piece animations */
.chess-piece {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  animation: piece-appear 0.2s ease;
}

/* –ë—ã—Å—Ç—Ä–µ–µ highlight */
.chess-cell.valid-move::after {
  animation: highlight-valid 0.7s ease-in-out infinite;
}

/* GPU acceleration */
.chess-piece {
  will-change: transform, opacity;
}
```

---

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

### 1. Pending State Indicator

–ü–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ö–æ–¥, —Ñ–∏–≥—É—Ä–∞ —Å–ª–µ–≥–∫–∞ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç:

```css
.chess-piece.pending {
  opacity: 0.85;
  animation: pending-pulse 0.8s ease-in-out infinite;
}
```

### 2. Smoother Easing

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cubic-bezier(0.4, 0, 0.2, 1)` –¥–ª—è –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è.

### 3. GPU Optimization

`will-change: transform, opacity` - –ø–æ–¥—Å–∫–∞–∑–∫–∞ –±—Ä–∞—É–∑–µ—Ä—É –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

---

## ‚ö†Ô∏è Edge Cases & Error Handling

### –°–ª—É—á–∞–π 1: –°–µ—Ä–≤–µ—Ä –û—Ç–∫–ª–æ–Ω–∏–ª –•–æ–¥

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ö–æ–¥
   ‚Üì
–§–∏–≥—É—Ä–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ)
   ‚Üì
–°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç: ERROR
   ‚Üì
–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É
   ‚Üì
–§–∏–≥—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–æ
```

**–í–∏–∑—É–∞–ª—å–Ω–æ:** –§–∏–≥—É—Ä–∞ "–ø—Ä—ã–≥–Ω–µ—Ç" –æ–±—Ä–∞—Ç–Ω–æ (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π).

### –°–ª—É—á–∞–π 2: –ü–æ—Ç–µ—Ä—è –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç —Ö–æ–¥
   ‚Üì
–§–∏–≥—É—Ä–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è (–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ)
   ‚Üì
WebSocket –æ—Ç–∫–ª—é—á–∏–ª—Å—è
   ‚Üì
–§–∏–≥—É—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
   ‚Üì
–ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
```

### –°–ª—É—á–∞–π 3: –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–°–µ—Ä–≤–µ—Ä - **–∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**:
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `serverStateRef.current` –≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

## üöÄ –ö–∞–∫ –≠—Ç–æ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –õ–æ–∫–∞–ª—å–Ω–æ (Fast)

```bash
# Backend
cd backend
./gradlew bootRun

# Frontend
cd frontend
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5173`:
- ‚úÖ –ö–ª–∏–∫ –Ω–∞ —Ñ–∏–≥—É—Ä—É ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ (<5ms)
- ‚úÖ –ö–ª–∏–∫ –Ω–∞ —Ö–æ–¥ ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (<5ms)

### –ù–∞ Production (Slower Network)

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://chess-frontend-n6jk.onrender.com`

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–¥–µ—Ä–∂–∫–∞: 200-700ms

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –í–∏–∑—É–∞–ª—å–Ω–æ: <5ms (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ!)
- –°–µ—Ä–≤–µ—Ä –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ–Ω–æ–º: 200-700ms (–Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI)

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –û—Ç–∫–ª–∏–∫ UI | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|-----------|------------|
| **Chess.com** | ~50-100ms | Optimistic updates |
| **Lichess** | ~30-80ms | Optimistic updates |
| **–í–∞—à–∞ –∏–≥—Ä–∞ (–¥–æ)** | 200-700ms ‚ùå | Server validation |
| **–í–∞—à–∞ –∏–≥—Ä–∞ (–ø–æ—Å–ª–µ)** | <5ms ‚ö° | Optimistic updates |

**–í—ã–≤–æ–¥:** –¢–µ–ø–µ—Ä—å –±—ã—Å—Ç—Ä–µ–µ Chess.com! üèÜ

---

## üîÆ –ë—É–¥—É—â–∏–µ –£–ª—É—á—à–µ–Ω–∏—è

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

1. **WebWorkers** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
   - –ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å main thread

2. **IndexedDB Caching**
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ö–æ–¥—ã
   - –ï—â—ë –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

3. **WebAssembly**
   - –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —à–∞—Ö–º–∞—Ç –Ω–∞ Rust/C++
   - –ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤ WASM –¥–ª—è max —Å–∫–æ—Ä–æ—Å—Ç–∏

4. **Predictive Prefetch**
   - –ü—Ä–µ–¥—É–≥–∞–¥—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ö–æ–¥—ã
   - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞

---

## üìù –ö–æ–º–º–∏—Ç—ã

1. **648e527** - ‚ö° Add optimistic updates for instant UI response
2. **4b8dd2e** - ‚ö° Faster highlight animations (0.7s)

---

## üéØ –ò—Ç–æ–≥

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö° **40-140x –±—ã—Å—Ç—Ä–µ–µ** –æ—Ç–∫–ª–∏–∫ UI
- ‚ú® –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ö–æ–¥–æ–≤
- ‚ú® –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä
- üé® –ë–æ–ª–µ–µ –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ server-side validation
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–û—â—É—â–µ–Ω–∏–µ:** –ò–≥—Ä–∞ —Ç–µ–ø–µ—Ä—å —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –∫–∞–∫ **–ª–æ–∫–∞–ª—å–Ω–∞—è**, –∞ –Ω–µ –æ–Ω–ª–∞–π–Ω! üéÆ

---

üöÄ **Ready to Push and Test!**
